package action

import (
	"github.com/gin-gonic/gin"
	"github.com/sirupsen/logrus"
	"golang_game_merchant/global/status"
	"golang_game_merchant/model"
)

type warnLogReq struct {
	Page      int `json:"page"`
	PageCount int `json:"page_count"`
}

type warnLogResp struct {
	List  []model.WarnLog `json:"list"`
	Total int             `json:"total"`
}

// Post: {"page":1,"page_count":3}
func QueryWarningLog(c *gin.Context) {
	merchantID := 1

	var req warnLogReq
	err := c.Bind(&req)
	if err != nil {
		logrus.Errorf("c.Bind(),%v", err)
		RespParamErr(c)
		return
	}

	var resp warnLogResp
	resp.List, resp.Total, err = model.QueryWarningLog(model.Db, merchantID, req.Page, req.PageCount)
	if err != nil {
		logrus.Errorf("model.QueryWarningLog(),%v", err)
		RespServerErr(c)
		return
	}

	RespJson(c, status.OK, resp)
}
