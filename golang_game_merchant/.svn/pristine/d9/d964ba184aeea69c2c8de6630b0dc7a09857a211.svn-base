package model

import "github.com/jinzhu/gorm"

//位置：merchant_website
type MemberRegistration struct {
	RegEmail            int `json:"reg_email"`
	RegPayPass          int `json:"reg_pay_pass"`
	RegPhone            int `json:"reg_phone"`
	RegSecurityQuestion int `json:"reg_security_question"`
	RegTrueName         int `json:"reg_true_name"`
}

func QueryMemberRegistration(db *gorm.DB, mid int) (*MemberRegistration, error) {
	var mr MemberRegistration
	if err := db.Table("merchant_website").Where("merchant_id = ?", mid).Find(&mr).Error; err != nil {
		if err == gorm.ErrRecordNotFound {
			return nil, nil
		}
		return nil, err
	}

	return &mr, nil
}

func ModifyMemberRegistration(db *gorm.DB, req *MemberRegistration, mid int) error {
	if err := db.Table("merchant_website").Where("merchant_id = ?", mid).Updates(*req).Error; err != nil {
		return err
	}
	return nil
}
